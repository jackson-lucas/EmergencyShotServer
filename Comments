Sinistro Implementar no Servidor Openshift
1 -  Incêndio
2 -  Acidente de trânsito
3 -  Corte/poda de árvore
4 -  Deslizamento de terra
5 -  Enchente
6 -  Desabamento
7 -  Vazamento de gás

Taxonomia Atendentes
Incendio
    Veiculo
    Imovel
    vegetação urbana
    florestal
Corte/Poda de Arvore
    rede eletrica
    edificio
    veiculo
Acidente de Transito
    c/ vitima
    s/ vitima
    presa em ferragem
Vazamento de Gás
    com fogo
    sem fogo
Outros

MVP Server
    // Melhor ja ter a tabela no android. evita a necessidade de uma conexao antes do usuario poder fazer a chamada
    getSinistros() ***

        {

        }

    GET
    readEmergencyCallByTimeInterval(autheticationId?, time, interval)

    POST
    createEmergencyCall(email, data, localizacao, midia)
    {
        googleID: "JKLDFIO$#402392",
        data: "20151128", // 2015y 11m 28d
        horario: "143000", // 14h 30m 00s
        localizacao: {
            lat: -3.3232,
            lon: -60.4343
        },
        sinistro: 1, ***
        midia: byte[]
    }

    POST
    createUser(nome, email, tefelone)
    getEmergencyCallsByTime(horario, intervalo) intervalo em minutos
    // 16:30, 30 = 16:00 - 16:30
    {
        nome: "Jackson Lima",
        googleId: "KDJRIO32FKLD",
        telefone: "92991259125"
    }

// How to mine data? to knowledge multiple calls at same location and time
    leaflet plugin: https://github.com/Leaflet/Leaflet.markercluster (by location)
    interval time can be provided by server or attendant call.


Database
    EmergencyCall
     id : serial
     email
     data
     tempo: hh:mm:ss
     localizacao
     midia

    User
     nome
     email
     telefone


DROP TABLE IF EXISTS pessoa CASCADE;
DROP TABLE IF EXISTS chamada CASCADE;
DROP TABLE IF EXISTS gestores CASCADE;

#####################

CREATE TABLE PESSOA(
NOME CHAR(100),
GOOGLE_ID CHAR(21) PRIMARY KEY,
TELEFONE CHAR(11)
);

CREATE TABLE SINISTRO(
ID INT PRIMARY KEY,
SINISTRO CHAR(60) UNIQUE
);

// FOREIGN KEY (GOOGLE_ID) REFERENCES PESSOA(GOOGLE_ID),
// PRIMARY KEY (ID,GOOGLE_ID,DATA),

CREATE TABLE CHAMADA(
ID SERIAL,
DATA DATE,
HORARIO TIME,
LAT FLOAT(30),
LON FLOAT(30),
MIDIA TEXT,
ID_SINISTRO INT,
PRIMARY KEY (ID),
FOREIGN KEY (ID_SINISTRO) REFERENCES SINISTRO(ID)
);

CREATE TABLE GESTORES(
  ID SERIAL PRIMARY KEY,
  NOME CHAR(100),
  EMAIL CHAR(50),
  GERENTE BOOLEAN DEFAULT FALSE,
  SUP_GERENTE_ID INT DEFAULT NULL,
  FOREIGN KEY(SUP_GERENTE_ID) REFERENCES GESTORES(ID)
 );

 ###############

INSERT INTO pessoa(NOME, GOOGLE_ID, TELEFONE) VALUES ('Jackson Lima', '123456789012345678901', '92991251365');

INSERT INTO sinistro(ID, SINISTRO) VALUES (1, 'Incêndio em veículo');

INSERT INTO chamada(DATA, HORARIO, LAT, LON, ID_SINISTRO) VALUES ('01-05-2016', '15:00:00', '-3.119028', '-60.021531', 1);

select * from pessoa;
select * from sinistro;
select * from chamada;

localhost:3000/create_call/jlsl@icomp.ufam.edu.br/incendio/20151128/120000/-3.119028/-60.021731/BLOB
http://localhost:3000/create_pessoa/jackson lima/jlsl@icomp.ufam.edu.br/991252534
